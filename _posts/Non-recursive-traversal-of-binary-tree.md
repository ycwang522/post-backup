---
title: 二叉树的非递归遍历
date: 2016-07-17 11:07:59
categories: 数据结构
tags:
	- 二叉树
---


##  前序遍历的非递归实现

以如下二叉树为例，分析：

![](http://img.blog.csdn.net/20131023202806187?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbnNfY29kZQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)

<font color="red">　根据先序遍历的顺序，先访问根结点，再访问左子树，最后访问右子树，而对于每个子树来说，又按照同样的访问顺序进行遍历。上图的先序遍历顺序为：ABDECF
</font>

### 思路分析
非递归的实现思路如下：

对于任意节点P，

1. 输出结点P，然后将其入栈，再看P的左孩子是否为空；
2. 若P的左孩子不为空，则<font color="green">置P的左孩子为当前节点</font>，重复上一步的过程；
3. 若P的左孩子为空，则<font color="green">将栈顶节点出栈，但不输出，并将出栈结点的右孩子置为当前节点</font>，看其是否为空；
4. 若不为空，则循环第1步的操作；
5. 如果为空，则继续出栈，但不输出，同时将出栈节点的右孩子置为当前节点，看其是否为空，重复第4步和第5步的操作；
6. 直到当前节点P为NULL并且栈空，便利结束。</br>

<!-- more -->

### 实例分析
**下面以上图为例详细分析其先序遍历的非递归实现过程：**

首先，从根节点A开始，根据操作1），输出A，并将其入栈，由于A的左孩子不为空，根据操作2），将B置为当前节点，再根据操作1），将B输出，并将其入栈，由于B的左孩子也不为空，根据操作2），将D置为当前节点，再根据操作1），输出D，并将其入栈，此时输出序列为ABD；

由于D的左孩子为空，根据操作3），将栈顶节点D出栈，但不输出，并将其右孩子置为当前节点；

由于D的右孩子为空，根据操作5），继续将栈顶节点B出栈，但不输出，并将其右孩子置为当前节点；

由于B的右孩子E不为空，根据操作1），输出E，并将其入栈，此时输出序列为：ABDE；

由于E的左孩子为空，根据操作3），将栈顶节点E出栈，但不输出，并将其右孩子置为当前节点；

由于E的右孩子为空，根据操作5），继续将栈顶节点A出栈，但不输出，并将其右孩子置为当前节点；

由于A的右孩子C不为空，根据操作1），输出C，并将其入栈，此时输出序列为：ABDEC；

由于A的左孩子F不为空，根据操作2），则将F置为当前节点，再根据操作1），输出F，并将其入栈，此时输出序列为：ABDECF；

由于F的左孩子为空，根据操作3），将栈顶节点F出栈，但不输出，并将其右孩子置为当前节点；

由于F的右孩子为空，根据操作5），继续将栈顶元素C出栈，但不输出，并将其右孩子置为当前节点；

此时栈空，且C的右孩子为NULL，因此遍历结束。


### 代码实现
<font color="red">根据以上思路，前序遍历的非递归实现代码如下：</font>

```cpp
void pre_traverse(BTree pTree)
{
	PSTACK stack = create_stack();  //创建一个空栈
	BTree node_pop;                 //用来保存出栈节点
	BTree pCur = pTree;             //定义用来指向当前访问的节点的指针

	//直到当前节点pCur为NULL且栈空时，循环结束
	while(pCur || !is_empty(stack))
	{
		//从根节点开始，输出当前节点，并将其入栈，
		//同时置其左孩子为当前节点，直至其没有左孩子，及当前节点为NULL
		printf("%c ", pCur->data);
		push_stack(stack,pCur);
		pCur = pCur->pLchild;
		//如果当前节点pCur为NULL且栈不空，则将栈顶节点出栈，
		//同时置其右孩子为当前节点,循环判断，直至pCur不为空
		while(!pCur && !is_empty(stack))
		{
			pCur = getTop(stack);
			pop_stack(stack,&node_pop);
			pCur = pCur->pRchild;			
		}
	}
}
```

## 参考文章
[兰亭风雨的专栏——二叉树递归与非递归遍历（附完整源码）](http://blog.csdn.net/ns_code/article/details/12977901)
